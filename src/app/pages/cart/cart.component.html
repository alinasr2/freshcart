<section>
    <div class="flex justify-between">
        <div>
            <h2 class="text-2xl italic mb-5 text-green-700 font-semibold" >Shop Cart</h2>
            <p>Total Cart Price : <span class="text-green-600 font-semibold">{{totalPrice}} EGP</span></p>
        </div>
        <button (click)="clearCart()" class="h-[30px] bg-red-700 hover:bg-red-800 transition-all duration-300 rounded py-0 px-6 text-white font-semibold">Clear Cart</button>
    </div>
    <div class="row">

        @for (product of products; track product.product._id) {
            <div class="my-1 py-1 border-b flex flex-wrap justify-between items-center">
                <div class="flex flex-wrap items-center gap-3">
                    <div class="w-[150px] m-auto ">
                        <img [src]="product.product.imageCover" alt="img" class="w-full">
                    </div>
                    <div class="flex flex-col gap-2">
                        <p> {{product.product.title.split(" ",6).join(" ")}} </p>
                        <p class="text-green-700">price : {{product.price}} </p>
                        <span (click)="removeProduct(product.product._id)" role="button" class="flex items-center gap-2 border w-fit py-1 px-2 border-green-700 rounded-lg text-green-700 hover:text-white hover:bg-green-700 transition-all duration-300"><i class="fa-solid fa-trash"></i> <p>Remove</p></span>
                    </div>
                </div>
                <div class="flex gap-2 items-center">
                    <i (click)="updateCount(product.product._id,product.count - 1)" role="button" class="fa-regular fa-square-minus text-green-700 text-2xl"></i>
                        <p class="text-2xl"> {{product.count}} </p>
                    <i (click)="updateCount(product.product._id,product.count + 1)" role="button" class="fa-regular fa-square-plus text-green-700 text-2xl"></i>
                </div>
            </div>
        }
        @empty {
            <p class="text-green-500 text-center text-[40px]">Cart is Empty</p>
        }

    </div>

    <button [routerLink]="['/checkout',cartId]" class="bg-green-600 hover:bg-green-700 transition-all duration-300 rounded px-11 m-auto block text-white font-semibold h-[50px] mt-5">Checkout</button>

    
</section>